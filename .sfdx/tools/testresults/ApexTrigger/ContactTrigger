trigger ContactTrigger on Contact(after insert, after update, after deleted, after undelete){
    //before-creation, after-update
    switch on Trigger.operationType {
        when AFTER_INSERT{
            Set<Id> accountIds=new Set<Id>();//code optimization
            for(Contact con : Trigger.new){
                if(String.isNotBlank(con.AccountId)){
                    //write automatiion logic
                    accountIds.add(con.AccountId);
                    String accountId = con.AccountId;
                }
            }
            List<AggregateResult> results=[SELECT Id, Name, AccountId, COUNT(Id) totalContacts 
                    FROM Contact 
                        WHERE Active__c=true 
                        AND AccountId=: accountIds 
                        GROUP BY AccountId
                    ];
             for(AggregateResult result : results){
                //get account id and number of active contacts
                String accId=String.valueOf(result.get('AccountId'));
                integer totalContacts=Integer.valueOf(result.get('totalContacts'));

                Account acc=new Account(Id=accId, Active_Contacts__c=totalContacts);
                update acc;

            }
        }
    }
}